{
	properties: {
		resource_image: "def(school, size=14) {
			type: 'image',
			image: 'magic-icons.png',
			area: [4+(school-1)*17,4,18+(school-1)*17,18],
			image_width: size,
			image_height: size
		}",

		icon_image: "def(index, size=10) {
			type: 'image',
			image: 'citadel-icons.png',
			area: [index*10,0,(index+1)*10,10],
			image_width: size,
			image_height: size
		}",

		font: "'RobotoCondensed-Light'",

		icon_widget: "def(str, size=10) switch(str,
			'&gold;',    resource_image(1, size),
			'&blood;',   resource_image(2, size),
			'&food;',    resource_image(3, size),
			'&scrolls;', resource_image(4, size),
			'&faith;',   resource_image(5, size),
			'&life;',    icon_image(0, size),
			'&vuln;',    icon_image(1, size),
			'&resist;',  icon_image(2, size),
			'&range;',   icon_image(3, size),
			'&attack;',  icon_image(4, size),
			'&exhaust;', icon_image(5, size),
			'&energy;',  icon_image(6, size),
			'&move;',    icon_image(7, size),
			false asserting (not 'Bad markup in card') | str)",

		parse_markup_into_widgets: "def(text, scale=1)
		  if(match, [
			label_base + {text: match[0]},
			icon_widget(match[1], 14*scale),
		  	] + parse_markup_into_widgets(match[2], scale),
		  	[label_base + {text: text}])
		  where match = regex_match(text, '(.*?)(&[a-z]+;)(.*)')
		  where label_base = {
			type: 'label',
			color: 'black',
			size: 10*scale,
			font: font,
		  }",
	}
}
