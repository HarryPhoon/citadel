{
	id: "particle_editor",
	is_human: true,
	hitpoints: 4,
	editor_info: { category: "player" },
	mouse_drag_threshold: 10,

	properties: {
		load: "def(string fname) ->commands
			set(particles, get_document('data/particles/' + fname + '.cfg', [ enum uncached ] ))
		",

		save: "def(string fname) ->commands
			write_document('data/particles/' + fname + '.cfg', particles.write, [ enum game_dir ])
			asserting particles != null
		",

		return_to_titlescreen: { type: "function()->commands" },

		draggable: { type: "bool", default: false },
	},

	events: {
		create: "[
			spawn('button_controller', {
				text: 'Back',
				on_click: me.return_to_titlescreen,
				trap_escape: true,
				_font_size: lib.gui.py(22),
				x2: level.dimensions[2] - lib.gui.py(10),
				y2: level.dimensions[3] - lib.gui.py(10),
				button_width: lib.gui.py(60),
				button_height: lib.gui.py(24),
				zorder: zorder-1,
			})
		]",

		drag: "if(draggable,
			set(mid_xy, lib.gui.mouse_pos(level))
		)",
	},


	particles: {	
		id: 'circle_portal',
		particle_quota: 2000,
		texture: { image: 'pu_flare_12_256x256.png', address_mode: 'clamp' },
		blend: 'add',
		depth_write: false,
		depth_check: false,
		default_particle_width: 4.0,
		default_particle_height: 4.0,
		renderer: {
			type: 'billboard',
		},
		emitter: {
			type: 'circle',
			emission_rate: 300,
			duration: 10,
			time_to_live: 20,
			velocity: 200.0,
			circle_radius: 200,
			direction: [0,1,0],
		},
		affector: [{
			type: 'color',
			time_color: [{
				time: 0, 
				color:[0,1,0,1]
			}, {
				time: 0.8, 
				color:[0,0,1,1]
			}, {
				time: 1, 
				color:[0,0,0,0]
			}],
		},{
			type: 'jet',
			acceleration: {
				type: 'random',
				min: 0.1,
				max: 1.0,
			},
		}],
	},
}
