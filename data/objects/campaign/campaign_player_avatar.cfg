{
	id: "campaign_player_avatar",
	prototype: ["campaign_object"],

	properties: {

		previous_loc: { type: "Loc|null" },

		move: "def([Loc] path) ->commands execute(me, if(path, [
			set(previous_loc, loc),
			_controller.player_enter_loc(path[0]),

			if(_controller.loc_is_full(path[0]) = false, [
				set(loc, path[0]),
				animate(me, {
					mid_x: pos[0],
					mid_y: pos[1],
				}, {
					name: 'move',
					replace_existing: true,
					duration: 16,
					on_complete: bind_command(me.move, path[1:]),
				}),
			])
		] where pos = _controller.hex_pos(path[0])))",
	},
}
