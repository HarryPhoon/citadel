{
	"animation": [
		{
			"id": "main",
			"image": "card-silver.png",
			"rect": [0,0,145,203],
			scale: 1
		}
	],
	"id": "card",

	vars: {
		_card_type: null,
		controller: null
	},

	on_spawned: "[set(vars.controller, spawner),
	  if(card_type.creature_object,
	    [spawn('creature', x + 60, y + 60, 1, [set(child.zorder, zorder+5), set(child.creature_object, card_type.creature_object)])
		]),

		[
			set(red, 127 + 127*school.red),
			set(green, 127 + 127*school.green),
			set(blue, 127 + 127*school.blue),
		]
	] where school = get_document('data/schools.cfg')[card_type.school]",

	on_click: "vars.controller.card_clicked(me)",

	properties: {
		card_type: { get: "vars._card_type", set: "[set(vars._card_type, value), fire_event('init')]" },
	},

	on_init: "[textv(me, {text: card_type.name, align: 'left', color: 'black', size: 12, rect: [18, 10, 120, 20]},
	       {text: str(card_type.cost), align: 'left', color: 'black', size: 14, rect: [126, 8, 145, 20]},
		   if(card_type.creature_object != null,
				   {text: fold(card_type.creature_object.tags, a + ' ' + b, ''), align: 'left', color: 'black', size: 10, rect: [15, 115, 120, 130]}),
	       if(card_type.rules_text, {text: card_type.rules_text, align: 'left', color: 'black', size: 10, rect: [15, 130, 120, 100]}),
		   {text: card_type.creature_object.attack + '/' + card_type.creature_object.life, align: 'left', color: 'black', size: 14, rect: [110, 180, 40, 30]})]"
}
