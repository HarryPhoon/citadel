{
	id: "target_particle_effect",

	prototype: ["particle_controller"],

	timer_frequency: 6,

	properties: {
		controller: { type: "obj citadel_controller" },

		_starting_state_id: { type: "int" },
		_stack_id: { type: "int" },

		_dying: { type: "bool", default: false },

		_delay_end: { type: "int" },
		_fade_time: { type: "int" },
	},

	events: {
		timer: "if(_dying = false and controller.get_state_id() > _starting_state_id and find(controller.state.stack, value.stack_id = _stack_id) = null,
		[
			set(_dying, true),
			fade_away_and_die(_fade_time)
		])",
	},
}
