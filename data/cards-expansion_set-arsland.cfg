{
//Entropia--------------------------------------------------------------------------
	"Death Knight": {
		name: "Death Knight",
		type: "creature",
		set: "Arsland",
		portrait: "school-blood.png",
		cost: 6,
		school: "@eval BLOOD",
		rarity: 0,
		help_strings: ["Devoted X"],		
		creature: {
			attack: 7,
			life: 6,			
            triggered_abilities: [{
				name: "Devoted 4",                  
				rules: "Death Knight gains <i>Revenant</i>",
				on_summoned: "def(class creature creature, class game game) ->commands
                [
                    if(game.players[game.current_player_index].get_resource_level(ENTROPIA)>=4,
						
					set(creature.triggered_abilities, 
					[
					construct('triggered_ability', {
						name: 'Revenant',
						once: true,
						rules: q(If Death Knight would die, it is fully restored instead.),
	
						on_die: q^def(class creature creature, class game game) ->commands
							if(not game.creature_at_loc(creature.loc), game.summon_creature(
							lib.citadel.create_creature(creature.name, {
								name: creature.name,
								controller: creature.controller,
								loc: creature.loc,
								card_name: creature.card_name,
								summon_id: creature.summon_id,
								triggered_abilities: filter(lib.citadel.create_creature(creature.name).triggered_abilities, value.name != 'Revenant')
							})
						))
						^,
					})
					])
						
					,set(creature.triggered_abilities, [])),
                ]",
            }],
		},

	},
	
	"Sangromancer": {
		name: "Sangromancer",
		type: "creature",
		set: "Arsland",
		portrait: "school-blood.png",
		cost: 4,
		school: "@eval BLOOD",
		rarity: 1,	
		creature: {
			attack: 5,
			life: 4,			
			activated_abilities: [
			{
				name: "Drain",
				cost: 2,
				school: "@eval BLOOD",
				portrait: "school-blood.png",		
//				is_instant: true,
				is_response: true,
                uses_action: false,
				rules: "Drain 1 life from an adjacent creature.",
				possible_targets: "
					def(class game game, class creature creature, [Loc] targets) ->[Loc]|null
						if(targets = [], filter(
							game.get_adjacent_locs(creature.loc),
							game.is_loc_on_board(value) and
							game.creature_at_loc(value) != null), null)
					",
				on_play: "def(class game game, class message.play_card info) ->commands
				[
					add(creature.life, 1),
					add(target_creature.life, -1),
				] where creature = info.get_creature(game)
				  where target_creature = game.creature_at_loc_or_die(info.targets[0])"
			}
			],
		},

	},	
	
	"Blood Burn": {
		name: "Blood Burn",
		set: "Arsland",
		rarity: 0,
		type: "spell",
		portrait: "school-blood.png",
		cost: 0,
		loyalty_cost: 2,
		school: "@eval BLOOD",
		rules: "Pay 5 life, gain 3 mana.",
		on_play: "def(class game game, class message.play_card info) ->commands
		[	
			add(player.life, -5),
            map(range(0,3),player.gain_mana_from_card(game, me)),	
		]
		where player = game.players[info.player_index]",
	},	
	
	"Blightstone": {
		name: "Blightstone",
		type: "creature",
		set: "Arsland",
		cost: 2,
		loyalty_cost: 1,
		school: "@eval BLOOD",
		portrait: "school-blood.png",
		portrait_focus: [552,369],
		portrait_focus_height: 260,
		help_strings: ["Cover"],
		creature: {
			tags: ["Terrain"],
			is_construct: true,
            portrait: "school-blood.png",
			image_num: 18,
			activated_abilities: [
			{
				name: "Blight",
				cost: 1,
				school: "@eval BLOOD",
				is_response: false,
				uses_action: true,
				rules: "Target creature in the lane gets poisoned.",
				possible_targets: "def(class game game, class creature creature, [Loc] targets) ->[Loc]|null
					if(targets = [], [c.loc | c<- game.creatures, creature.loc[0]=c.loc[0], c.is_valid_target(game, game.nplayer, me), c.is_construct=false, c.is_building=false])
				",
				on_play: "def(class game game, class message.play_card info) ->commands
				[
					add(target_creature.status_effects, ['Poisoned'])
				] where target_creature = game.creature_at_loc_or_die(info.targets[0])"
			},
			],
		},
	},		
	
	
//Aether------------------------------------------	
	"Chosen Warrior": {
		name: "Chosen Warrior",
		type: "creature",
		set: "Arsland",
		portrait: "school-faith.png",
		cost: 4,
		school: "@eval FAITH",
		rarity: 0,
		help_strings: ["Devoted X"],		
		creature: {
			attack: 5,
			life: 4,			
            triggered_abilities: [{
				name: "Devoted 4",                  
				rules: "Chosen Warrior gets +0/+3 and gains <i>Cover</i>",
				on_summoned: "def(class creature creature, class game game) ->commands
                [
                    if(game.players[game.current_player_index].get_resource_level(FAITH)>=4,
					[
						add(creature.abilities, ['Cover']),
						add(creature.life, 3),
					]	
					,),
					
					set(creature.triggered_abilities, [])
                ]",
            }],
		},

	},

	"White Mage": {
		name: "White Mage",
		type: "creature",
		set: "Arsland",
		portrait: "school-faith.png",
		cost: 3,
		school: "@eval FAITH",
		rarity: 1,	
		creature: {
			attack: 4,
			life: 3,			
			activated_abilities: [
			{
				name: "Bless",
				cost: 2,
				school: "@eval FAITH",
				portrait: "school-faith.png",					
//				is_instant: true,
				is_response: true,
				uses_action: true,
				rules: "Let an adjacent creature gain 2 life.",
				possible_targets: "
					def(class game game, class creature creature, [Loc] targets) ->[Loc]|null
						if(targets = [], filter(
							game.get_adjacent_locs(creature.loc),
							game.is_loc_on_board(value) and
							game.creature_at_loc(value) != null), null)
					",
				on_play: "def(class game game, class message.play_card info) ->commands
				[
					add(target_creature.life, 2),
				] where creature = info.get_creature(game)
				  where target_creature = game.creature_at_loc_or_die(info.targets[0])"
			}
			],
		},	
	},
	
    "Tower of Faith": {
		name: "Tower of Faith",
		type: "creature",
		set: "Arsland",
		cost: 5,
		loyalty_cost: 1,
		school: "@eval FAITH",
		portrait: "school-faith.png",
		portrait_focus: [552,369],
		portrait_focus_height: 260,
		creature: {
			tags: ["Tower"],
			is_construct: true,
			portrait: "school-faith.png",
			passive_abilities: [
			{
                name: 'Censor Heresy',
                rules: "Non Aether cards have 1 more loyalty cost.",
				static_effect: "def(class game game, class creature creature) ->commands
				   [
				   game.players[0].add_static_cost_filter(
				     construct('cost_filter', {
						filter_loyalty_cost: 'def(class player p, class card_base card, int cost) ->int
							if ((FAITH in card.school),cost,cost + 1)
						',
					 })
				   ),
				   game.players[1].add_static_cost_filter(
				     construct('cost_filter', {
						filter_loyalty_cost: 'def(class player p, class card_base card, int cost) ->int
							if ((FAITH in card.school),cost,cost + 1)
						',
					 })
				   )
				   ]",
			}
			],
		},
	},	
	
//Gaea----------------------------------------------------------------	
	"Rafa Snake": {
		name: "Rafa Snake",
		type: "creature",
		set: "Arsland",
		portrait: "school-food.png",
		cost: 3,
		school: "@eval FOOD",
		rarity: 0,
		help_strings: ["Devoted X"],		
		creature: {
			attack: 4,
			life: 3,		
			abilities: ['Haste'],			
            triggered_abilities: [{
				name: "Devoted 2",                  
				rules: "Rafa Snake gets <i>Feral</i> unless this ability is triggered",
				on_summoned: "def(class creature creature, class game game) ->commands
                [
                    if(game.players[game.current_player_index].get_resource_level(FOOD)<2,
						add(creature.abilities, ['Feral'])
					,),	
					set(creature.triggered_abilities, [])
                ]",
            }],
		},
	},		
	
	"Spitter": {
		name: "Spitter",
		type: "creature",
		set: "Arsland",
		portrait: "school-food.png",
		cost: 6,
		school: "@eval FOOD",
		rarity: 1,	
		creature: {
			attack: 7,
			life: 5,			

            triggered_abilities: [{
				name: "Acid Spit",
				rules: "At the start of each turn, Spitter deals 1 damage to adjacent enemy creatures.",
                on_begin_turn: "def(class creature creature, class game game) ->commands
			        [
                        map(game.creatures, if((value.controller!=creature.controller) and (not value.is_construct) and (not value.is_building) and game.locs_adjacent(creature.loc, value.loc), [
						value.inflict_damage(game, 1),]))
					]",
            }],  
		},	
	},		
	
	"Awaken the Beast": {
		name: "Awaken the Beast",
		set: "Arsland",
		rarity: 0,
		type: "spell",
		school: "@eval GAEA",
		portrait: "school-food.png",
		is_response: true,
		cost: 3,
		loyalty_cost: 2,
		rules: "Put an <i>Awakened Beast</i> into your hand",
		on_play: "def(class game game, class message.play_card info) ->commands
		[			
			set(the_player.hand, the_player.hand + ['Awakened Beast']),
		]where the_player = game.players[info.player_index]",		
	},		
	
	"Awakened Beast": {
		name: "Awakened Beast",
		rarity: 0,
		type: "creature",
		portrait: "school-food.png",

		cost: 3,
		school: "@eval GAEA",
		creature: {
			attack: 9,
			life: 7,
			resistance: 1,
		}
	},	
	
	"Deep Cave": {
		name: "Deep Cave",
		type: "creature",
		set: "Arsland",
		cost: 3,
		loyalty_cost: 0,
		school: "@eval FOOD",
		portrait: "forest.png",
		portrait_focus: [552,369],
		portrait_focus_height: 260,
		help_strings: ["Cover"],
		rules: "While not engaged, creatures in this tile have <i>Cover</i> and +4 armor.",
		creature: {
			tags: ["Terrain"],
			is_construct: true,
            portrait: "forest.png",
			image_num: 18,
			static_ability_effect: "if(creature.loc = target.loc and not target.is_construct and (target.targets_attacking(game)=[]), [target.add_ability_static_duration('Cover'),target.apply_static_effect('resistance', 4)])",
		},
	},	
	
//Minerva-----------------------------------------	
	"Aspiring Student": {
		name: "Aspiring Student",
		type: "creature",
		set: "Arsland",
		portrait: "school-scrolls.png",
		cost: 3,
		school: "@eval SCROLLS",
		rarity: 0,
		help_strings: ["Devoted X"],
		creature: {
			attack: 3,
			life: 3,			
            triggered_abilities: [
			{
				name: "Devoted 2",                  
				rules: "Aspiring Student gets +1/+1",
				on_summoned: "def(class creature creature, class game game) ->commands
                    if(game.players[game.current_player_index].get_resource_level(SCROLLS)>=2,
					[
						add(creature.life, 1),
						add(creature.attack, 1),
					],)",
            },
			{
				name: "Devoted 5",                  
				rules: "Aspiring Student gets +2/+2",
				on_summoned: "def(class creature creature, class game game) ->commands
                [
                    if(game.players[game.current_player_index].get_resource_level(SCROLLS)>=5,
					[
						add(creature.life, 2),
						add(creature.attack, 2),
					]	
					,),	
					set(creature.triggered_abilities, [])
                ]",
            }],
		},

	},		
	
	"Mistcaller": {
		name: "Mistcaller",
		type: "creature",
		set: "Arsland",
		portrait: "school-scrolls.png",
		cost: 5,
		school: "@eval SCROLLS",
		rarity: 1,	
		creature: {
			attack: 4,
			life: 5,			
			activated_abilities: [
			{
				name: "Mist",
				cost: 2,
				school: "@eval SCROLLS",
				portrait: "school-scrolls.png",					
//				is_instant: true,
				is_response: true,
				uses_action: false,
				rules: "Let an adjacent creature get -2/+0 and -2 armor this turn.",
				possible_targets: "
					def(class game game, class creature creature, [Loc] targets) ->[Loc]|null
						if(targets = [], filter(
							game.get_adjacent_locs(creature.loc),
							game.is_loc_on_board(value) and
							game.creature_at_loc(value) != null), null)
					",
				on_play: "def(class game game, class message.play_card info) ->commands
				[
					game.creature_at_loc_or_die(info.targets[0]).apply_effect_until_end_of_turn('attack', -2),
					game.creature_at_loc_or_die(info.targets[0]).apply_effect_until_end_of_turn('resistance', -2),				
				]asserting size(info.targets) = 1"
			}
			],
		},	
	},	
	
	"Mind Shock": {
		name: "Mind Shock",
		set: "Arsland",
		rarity: 1,
		type: "spell",
		school: "@eval SAPIENZA",
		portrait: "school-scrolls.png",
		cost: 2,
		loyalty_cost: 3,
		rules: "Shuffle your opponent's hand into his deck.",
		
		possible_targets: "def(class game game, class creature avatar, [Loc] targets) ->[Loc]|null
		null",

		on_play: "def(class game game, class message.play_card info) ->commands
		[
			set(opponent.deck, shuffle(opponent.deck + opponent.hand)),	
			set(opponent.hand, []),
		] where opponent = game.players[(info.player_index+1)%2]
		",	
	},
	
	"Psychic Blast": {
		name: "Psychic Blast",
		set: "Arsland",
		rarity: 0,
		type: "spell",
		school: "@eval SAPIENZA",
		portrait: "school-scrolls.png",
		is_response: true,
		cost: 1,
		loyalty_cost: 2,
		rules: "Deal X damage to target creature, where X is the size of your hand. Then shuffle your hand into your deck.",
		
		arrow_texture: "effects/psychic-energy.png",		
		possible_targets: "all_creatures_as_possible_targets",
		on_play: "def(class game game, class message.play_card info) ->commands
		[
			if(info.targets[0][0] = -1,
			//targeting a player
				add(game.players[info.targets[0][1]].life, -damage_amount),

			//targeting a creature
				creature.inflict_damage(game, damage_amount)
					asserting size(info.targets) = 1
					where creature = game.creature_at_loc_or_die(info.targets[0])) where damage_amount=size(the_player.hand),

			set(the_player.deck, shuffle(the_player.deck + the_player.hand)),					
			set(the_player.hand, []),
		]where the_player = game.players[info.player_index]",		
	},	
	
//Materia------------------------------------------	
	"Trained Soldier": {
		name: "Trained Soldier",
		type: "creature",
		set: "Arsland",
		portrait: "school-gold.png",
		cost: 4,
		school: "@eval GOLD",
		rarity: 0,
		help_strings: ["Devoted X"],		
		creature: {
			attack: 5,
			life: 4,		
			resistance: 1,
            triggered_abilities: [{
				name: "Devoted 3",                  
				rules: "Trained Soldier gains 1 armor",
				on_summoned: "def(class creature creature, class game game) ->commands
                [
                    if(game.players[game.current_player_index].get_resource_level(GOLD)>=3,
					[
						add(creature.resistance, 1),
					]	
					,),
					
					set(creature.triggered_abilities, [])
                ]",
            }],
		},
	},		
	
	"Field Speechman": {
		name: "Field Speechman",
		type: "creature",
		set: "Arsland",
		portrait: "school-gold.png",
		cost: 5,
		school: "@eval GOLD",
		rarity: 1,	
		creature: {
			attack: 6,
			life: 5,			
			activated_abilities: [
			{
				name: "Speech",
				cost: 1,
				school: "@eval GOLD",
				portrait: "school-gold.png",					
//				is_instant: true,
				is_response: true,
                uses_action: false,
				rules: "Adjacent creatures you control get <i>Valiant</i>",
					
				on_play: "def(class game game, class message.play_card info) ->commands 
				[   
				   target.add_ability_until_end_of_turn('Valiant')
				  | target <- game.creatures,
				    not target.is_building,
					target.controller = creature.controller,
					game.locs_adjacent(creature.loc, target.loc)
				]	where creature = info.get_creature(game)",
			}
			],
		},	
	},	
	
	"Demolition": {
		name: "Demolition",
		set: "Arsland",
		type: "spell",
		school: "@eval MATERIA",
		portrait: "school-gold.png",
		cost: 0,
		loyalty_cost: 2,
		is_response: false,
		rarity: 0,	
		
		rules: "Destroy a land you control",
		possible_targets: "def(class game game, class creature avatar, [Loc] targets) ->[Loc]|null
		  if(targets = [], [creature.loc | creature <- game.constructs, creature.controller = avatar.controller])",
        on_play: "def(class game game, class message.play_card info) ->commands 
			if(construct, set(construct.destroyed, true))
			where construct = game.construct_at_loc(target) 
			where target = info.targets[0],",
	},	
	
	"Supply Station": {
		name: "Supply Station",
		set: "Arsland",
		rarity: 0,
		type: "creature",
		cost: 4,
		loyalty_cost: 1,
		school: "@eval GOLD",
		portrait: "school-gold.png",
		portrait_focus: [385,497],
		portrait_focus_width: 200,
		creature: {
			tags: ["Station"],
			is_construct: true,
			portrait_y_offset: 80,
			passive_abilities: [{
				name: "Supply",
				rules: "Creatures in this tile or in adjacent tiles get +1/+1.",
				static_effect: "def(class game game, class creature creature) ->commands
				if(creature.controller >=0, [   
                    if(creature.controller = target.controller and (game.locs_adjacent(creature.loc, target.loc) or (creature.loc = target.loc)),
				    [
						target.apply_static_effect('life', 1),
						target.apply_static_effect('attack', 1),
					])
				  | target <- game.creatures,
				    target.is_building = false
				])"
            }],
		}
	},
	
	
//A cycle of cards that reshuffles ----------------------------------------------------
	"Suffering": {
		name: "Suffering",
		set: "Arsland",
		rarity: 0,
		type: "spell",
        tags: ['Curse'],
		cost: 2,	
		loyalty_cost: 2,
		school: "@eval BLOOD",
		portrait: "school-blood.png",

		rules: "Target creature or player loses 2 life; shuffle this spell into your deck.",

		possible_targets: "all_creatures_and_players_as_possible_targets",
		on_play: "def(class game game, class message.play_card info) ->commands
		[
		game.players[game.current_player].draw_cards(game, 1),
		set(the_player.deck, shuffle(the_player.deck + [lib.citadel.create_card('Suffering')])),
		if(info.targets[0][0] = -1,
		  //targeting a player
		  add(game.players[info.targets[0][1]].life, -2),

		  //targeting a creature
		  add(creature.life, -2)
			asserting size(info.targets) = 1
			where creature = game.creature_at_loc_or_die(info.targets[0]))
		] where the_player = game.players[info.player_index]",
		ai_flags: ["@eval AI_CARD_NEVER_TARGET_FRIENDS"],
	},	
	
	"Enthusiasm": {
		name: "Enthusiasm",
		type: "spell",
		cost: 2,
		loyalty_cost: 2,
		set: "Arsland",
		rarity: 0,
		school: "@eval GOLD",
		portrait: "school-gold.png",
		rules: "Target creature gains +1/+1 and +1 armor; shuffle this spell into your deck",
		possible_targets: "all_creatures_as_possible_targets",

		on_play: "def(class game game, class message.play_card info) ->commands
		[
		  add(game.creature_at_loc_or_die(info.targets[0]).attack, 1),
		  add(game.creature_at_loc_or_die(info.targets[0]).life, 1),
		  add(game.creature_at_loc_or_die(info.targets[0]).resistance, 1),	
		  set(the_player.deck, shuffle(the_player.deck + [lib.citadel.create_card('Enthusiasm')])),		  
		] 	asserting size(info.targets) = 1
		where the_player = game.players[info.player_index]",
	},	

	"Vigour": {
		name: "Vigour",
		set: "Arsland",
		rarity: 1,
		type: "spell",
		portrait: "school-food.png",
		cost: 0,
		loyalty_cost: 3,
		school: "@eval FOOD",
		rules: "Gain 2 mana; shuffle this spell into your deck.",
		on_play: "def(class game game, class message.play_card info) ->commands
		 [
		   map(range(2), player.gain_mana_from_card(game, me)),
     	   set(player.deck, shuffle(player.deck + [lib.citadel.create_card('Vigour')])),	   
		 ]
		   where player = game.players[game.current_player_index]",
	},	
	
	"Denial": {
		name: "Denial",
		set: "Arsland",
		rarity: 1,
		type: "spell",
		school: "@eval SCROLLS",
		portrait: "school-scrolls.png",
		artist: "eleazzaar",
		cost: 2,
		loyalty_cost: 5,
		is_response: true,
		rules: "Make your opponent's card currently being cast fizzle out; shuffle this spell into your deck.",
		possible_targets: "
		  def(class game game, class creature avatar, [Loc] targets) ->[Loc]|null
		    if(game.stack = [] or not (game.stack[size(game.stack)-1] is class message.play_card), [], null)
		",

		on_play: "def(class game game, class message.play_card info) ->commands
			[
				set(the_player.deck, shuffle(the_player.deck + [lib.citadel.create_card('Denial')])),		
				set(game.stack[size(game.stack)-1].force_fizzle, true)
				asserting game.stack != []
			]
		 where the_player = game.players[info.player_index]",
	},
	
	"Prayer of Endurance": {
		name: "Prayer of Endurance",
		set: "Arsland",
		rarity: 0,
		type: "spell",
		is_response: false,
		cost: 1,
		loyalty_cost: 1,
		school: "@eval FAITH",
		portrait: "school-faith.png",

		rules: "Target creature gets +0/+2; shuffle this spell into your deck",
		possible_targets: "all_creatures_as_possible_targets",
		on_play: "def(class game game, class message.play_card info) ->commands
		  [
		    add(game.creature_at_loc_or_die(info.targets[0]).life, 2),
			set(the_player.deck, shuffle(the_player.deck + [lib.citadel.create_card('Prayer of Endurance')])),					
		  ] asserting size(info.targets) = 1
		   where the_player = game.players[info.player_index]",
	},	
	

	"Landslide": {
		name: "Landslide",
		set: "Arsland",
		type: "spell",
		school: "@eval SCROLLS",
		portrait: "school-scrolls.png",
		cost: 3,
		loyalty_cost: 3,
		is_response: false,
		rarity: 1,
		rules: "Move target land into an adjacent tile, replacing the land in the destination if there is one.",
		possible_targets: "def(class game game, class creature avatar, [Loc] targets) ->[Loc]|null
			switch(size(targets),
			  0, filter(game.all_locs, game.construct_at_loc(value)),
			  1, if(construct, filter(game.all_locs, game.locs_adjacent(value, construct.loc)), []) where construct = game.construct_at_loc(targets[0]),
			  null)

		",
			
        on_play: "def(class game game, class message.play_card info) ->commands 
		[
			if(destination_construct, set(destination_construct.destroyed, true)),
			game.construct_at_loc_or_die(info.targets[0]).set_loc(info.targets[1])
		]
			where construct = game.construct_at_loc(info.targets[0])
			where destination_construct = game.construct_at_loc(info.targets[1])",
	
	},	 
	

}