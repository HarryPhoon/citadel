{
    "shaders": {
		////////////////////////////////////////////////////////////////
		// vertex shaders
        "vertex": {
            "basic_v": "
                uniform mat4 u_mvp_matrix;
                attribute vec4 a_position;
                attribute vec2 a_texcoord;
                varying vec2 v_texcoord;
                void main()
                {
                    v_texcoord = a_texcoord;
                    gl_Position = u_mvp_matrix * a_position;
                }",
				
            "tile_shader_v": "
                uniform mat4 u_mvp_matrix;
                attribute vec4 a_position;
                attribute vec2 a_texcoord;
                varying vec2 v_texcoord;
                void main()
                {
                    v_texcoord = a_texcoord;
                    gl_Position = u_mvp_matrix * a_position;
                }
			",
			
			particle1_v: "
                uniform mat4 u_mvp_matrix;
				uniform int u_cycle;
				uniform int u_start_cycle;
				uniform int u_end_cycle;
				uniform vec2 u_centre_position;
                attribute vec2 a_position;
				attribute float a_start_cycle;
				varying float v_lifetime;
                void main()
                {
					float cycle = u_cycle - u_start_cycle;
					if(u_cycle >= u_start_cycle && u_cycle < u_end_cycle && cycle >= a_start_cycle) {
						vec4 v = vec4(a_position.x + u_centre_position.x, a_position.y + u_centre_position.y - cycle, 0.0, 1.0);
						gl_Position = u_mvp_matrix * v;
						v_lifetime = clamp(100.0 / cycle, 0.0, 1.0);
					} else {
						gl_Position = vec4(-3000, -3000, 0, 0);
						v_lifetime = 0.0;
					}
					gl_PointSize = 10.0;
                }
			",
				
        },
		
		////////////////////////////////////////////////////////////////
		// fragment shaders
        "fragment": {
            "hurt_flash_f": "
                uniform sampler2D u_tex_map;
				uniform vec4 u_color;
				varying vec2 v_texcoord;
				uniform int start_cycle;
				uniform int end_cycle;
				uniform int cycle;
				uniform bool is_poisoned;
                void main()
                {
					vec4 col = u_color;
					float cf = mod(cycle - start_cycle, 5) / 5.0;
					if(is_poisoned) {
						col *= vec4(0.0, 0.8, 0.0, 0.5);
					}
					if(cycle >= start_cycle && cycle < end_cycle && cf > 0.5) {
						col *= vec4(1.0, 0.0, 0.0, 0.8);
					}
                    gl_FragColor = texture2D(u_tex_map, v_texcoord) * col;
                }",
				
            "tile_shader_f": "
                uniform sampler2D u_tex_map;
				uniform vec4 u_color;
                uniform bool do_highlight;
				varying vec2 v_texcoord;
                void main()
                {
					vec4 col;
                    if(do_highlight) {
                        gl_FragColor = texture2D(u_tex_map, v_texcoord) * u_color;
                        gl_FragColor = clamp(gl_FragColor * 1.3, 0.0, 1.0);
					} else { 
						gl_FragColor = texture2D(u_tex_map, v_texcoord) * u_color;
					}
                }
			",
			
			particle1_f: "
                uniform sampler2D u_tex_map;
				uniform vec4 u_color;
				varying float v_lifetime;
                void main()
                {
					vec4 texColor = texture2D(u_tex_map, gl_PointCoord);
					gl_FragColor = u_color * texColor;
					gl_FragColor.a *= v_lifetime;
				}
			",
				
		},
	},
    
    "programs": [
        {
            "name": "hurt_flash", 
            "vertex": "basic_v", 
            "fragment": "hurt_flash_f",
            "attributes": {
                "vertex": "a_position",
                "texcoord": "a_texcoord",
            },
			"uniforms": {
				"mvp_matrix": "u_mvp_matrix",
			},
        },
        {
            "name": "tile_shader", 
            "vertex": "tile_shader_v", 
            "fragment": "tile_shader_f",
            "attributes": {
                "vertex": "a_position",
                "texcoord": "a_texcoord",
            },
			"uniforms": {
				"mvp_matrix": "u_mvp_matrix",
			},
        },
 		{
			"name": "particle1",
			"vertex": "particle1_v",
			"fragment": "particle1_f",
			"uniforms": {
				"mvp_matrix": "u_mvp_matrix",
			},
		},
   ],
}
